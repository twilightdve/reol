"use strict";(self.webpackChunkfansite_reol=self.webpackChunkfansite_reol||[]).push([[760],{7247:function(e,t,n){n.r(t);var a=n(6540),r=n(4794),o=n(6462),s=n(5279),l=n(2405),i=n(2114);t.default=()=>{const e=(0,o.useLocation)(),t=new URLSearchParams(e.search),n=parseInt(t.get("q")||"1",10),c=i.a[n-1],{0:u,1:d}=(0,a.useState)(null),{0:m,1:b}=(0,a.useState)({});(0,a.useEffect)((()=>{if("undefined"==typeof window)return;if(!localStorage.getItem("bbq2025_nickname"))return void(0,r.navigate)("/quiz/bbq2025/intro");let e=localStorage.getItem("bbq2025_user_hash");e||(e=(0,s.A)(),localStorage.setItem("bbq2025_user_hash",e));const t=JSON.parse(localStorage.getItem("bbq2025_answers")||"{}");b(t);const a=i.a.findIndex((e=>!t[e.id]));-1!==a&&n>a+1&&(0,r.navigate)(`/quiz/bbq2025?q=${a+1}`)}),[n]);return c?a.createElement("div",{className:"h-svh px-4 py-2 max-w-xl mx-auto bg-[#2F4D3A] overflow-y-hidden font-tegaki"},a.createElement("h2",{className:"font-bold mb-4 text-white"},a.createElement("span",{className:"text-sm"},"Q.",n,"／",i.a.length),a.createElement("br",null),a.createElement("p",{className:"text-xl py-2"},c.question)),a.createElement("div",{className:"space-y-2 h-full"},c.options.map(((e,t)=>a.createElement("button",{key:t,className:"w-full h-1/6 bg-[#F3E7D3] rounded border-[#E8C55D] border-2 font-bold text-2xl active:bg-[#F3E7D3] text-left px-4",onClick:()=>(async e=>{if(u)return;d(e);const t={...m,[c.id]:e};b(t),localStorage.setItem("bbq2025_answers",JSON.stringify(t));const a=localStorage.getItem("bbq2025_user_hash")||"",o=localStorage.getItem("bbq2025_nickname")||"",s=i.a.reduce(((e,n)=>e+(t[n.id]===n.answer?1:0)),0);console.log(t),console.log(s);try{await(0,l.BN)((0,l.H9)(i.A,"bbq2025_answers",a),{userHash:a,nickname:o,answers:i.a.map((e=>t[e.id]?e.options.indexOf(t[e.id]):-1)),score:s,timestamp:(0,l.O5)()})}catch(f){console.log(f),alert("送信に失敗しました。通信状況をご確認ください。")}n===i.a.length?(0,r.navigate)("/quiz/bbq2025/result-waiting"):setTimeout((()=>{d(null),(0,r.navigate)(`/quiz/bbq2025?q=${n+1}`)}),500)})(e),disabled:!!u},["①","②","③","④"][t]," ",e)))),u&&a.createElement("p",{className:"mt-4 text-green-600"},"選択しました：",u)):a.createElement("div",null,"問題が存在しません。")}},5279:function(e,t,n){n.d(t,{A:function(){return i}});var a={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let r;const o=new Uint8Array(16);const s=[];for(let c=0;c<256;++c)s.push((c+256).toString(16).slice(1));function l(e,t=0){return(s[e[t+0]]+s[e[t+1]]+s[e[t+2]]+s[e[t+3]]+"-"+s[e[t+4]]+s[e[t+5]]+"-"+s[e[t+6]]+s[e[t+7]]+"-"+s[e[t+8]]+s[e[t+9]]+"-"+s[e[t+10]]+s[e[t+11]]+s[e[t+12]]+s[e[t+13]]+s[e[t+14]]+s[e[t+15]]).toLowerCase()}var i=function(e,t,n){if(a.randomUUID&&!t&&!e)return a.randomUUID();const s=(e=e||{}).random??e.rng?.()??function(){if(!r){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");r=crypto.getRandomValues.bind(crypto)}return r(o)}();if(s.length<16)throw new Error("Random bytes length must be >= 16");if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){if((n=n||0)<0||n+16>t.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let e=0;e<16;++e)t[n+e]=s[e];return t}return l(s)}}}]);
//# sourceMappingURL=component---src-pages-quiz-bbq-2025-jsx-86b93e8696e467e69c69.js.map